<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Copyright (c) 2003-2022 Dieter Baron and Thomas Klausner.
   All rights reserved.
  
   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:
   1. Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above
      copyright notice, this list of conditions and the following
      disclaimer in the documentation and/or other materials provided
      with the distribution.
   3. The name of the author may not be used to endorse or promote
      products derived from this software without specific prior
      written permission.
  
   THIS SOFTWARE IS PROVIDED BY THOMAS KLAUSNER ``AS IS'' AND ANY
   EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
   PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR
   CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
   SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
   LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
   USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
   ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
   OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
   OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
   SUCH DAMAGE.
 -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../nih-man.css" type="text/css" media="all"/>
  <title>CKMAME(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">CKMAME(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">CKMAME(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">ckmame</code> &#x2014;
<div class="Nd">verify MAME ROM sets</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">ckmame</code></td>
    <td>[<code class="Fl">-CcFhjuVv</code>] [<code class="Fl">-D</code>
      <var class="Ar">dbfile</var>] [<code class="Fl">-e</code>
      <var class="Ar">dir</var>] [<code class="Fl">-O</code>
      <var class="Ar">dbfile</var>] [<code class="Fl">-R</code>
      <var class="Ar">dir</var>] [<code class="Fl">-T</code>
      <var class="Ar">file</var>]
      [<code class="Fl">-</code><code class="Fl">-autofixdat</code>]
      [<code class="Fl">-</code><code class="Fl">-config</code>
      <var class="Ar">file</var>]
      [<code class="Fl">-</code><code class="Fl">-copy-from-extra</code>]
      [<code class="Fl">-</code><code class="Fl">-fixdat</code>
      <var class="Ar">datfile</var>]
      [<code class="Fl">-</code><code class="Fl">-keep-old-duplicate</code>]
      [<code class="Fl">-</code><code class="Fl">-no-complete-games-only</code>]
      [<code class="Fl">-</code><code class="Fl">-complete-games-only</code>]
      [<code class="Fl">-</code><code class="Fl">-report-correct</code>]
      [<code class="Fl">-</code><code class="Fl">-db</code>
      <var class="Ar">dbfile</var>]
      [<code class="Fl">-</code><code class="Fl">-extra-directory</code>
      <var class="Ar">dir</var>]
      [<code class="Fl">-</code><code class="Fl">-fix</code>]
      [<code class="Fl">-</code><code class="Fl">-help</code>]
      [<code class="Fl">-</code><code class="Fl">-move-from-extra</code>]
      [<code class="Fl">-</code><code class="Fl">-no-report-correct</code>]
      [<code class="Fl">-</code><code class="Fl">-no-report-detailed</code>]
      [<code class="Fl">-</code><code class="Fl">-no-report-fixable</code>]
      [<code class="Fl">-</code><code class="Fl">-no-report-missing</code>]
      [<code class="Fl">-</code><code class="Fl">-no-report-summary</code>]
      [<code class="Fl">-</code><code class="Fl">-report-detailed</code>]
      [<code class="Fl">-</code><code class="Fl">-report-fixable</code>]
      [<code class="Fl">-</code><code class="Fl">-report-missing</code>]
      [<code class="Fl">-</code><code class="Fl">-report-summary</code>]
      [<code class="Fl">-</code><code class="Fl">-set</code>
      <var class="Ar">name</var>]
      [<code class="Fl">-</code><code class="Fl">-old-db</code>
      <var class="Ar">dbfile</var>]
      [<code class="Fl">-</code><code class="Fl">-rom-dir</code>
      <var class="Ar">dir</var>]
      [<code class="Fl">-</code><code class="Fl">-game-list</code>
      <var class="Ar">file</var>]
      [<code class="Fl">-</code><code class="Fl">-roms-unzipped</code>]
      [<code class="Fl">-</code><code class="Fl">-version</code>]
      [<code class="Fl">-</code><code class="Fl">-verbose</code>]
      [<var class="Ar">game ...</var>]</td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<code class="Nm">ckmame</code> is a program to check ROM sets for MAME, the
  Multiple Arcade Machine Emulator (see
  <span class="Pa">https://www.mamedev.org/</span>), or other emulators that
  provide ROM set information in a compatible way. This is the same format as
  clrmamepro dat files. <code class="Nm">ckmame</code> tells you which ROM files
  are missing or have a wrong checksum, can delete unknown and unused files from
  the ROM sets, and rename or move files.
<p class="Pp">MAME is an emulator for numerous arcade machines (video games,
    ranging from the 1970s to today). Since MAME is emulating the games, it uses
    the original images from the arcade machines' original ROM chips. MAME's
    internal database contains extensive information on the ROMs, including the
    sizes and checksums of the used ROMs. Since some arcade games are variants
    of others and share some of the same ROMs, there are also internal
    dependencies between these so called clones. To save space, ROMs can be
    archived in zip files and dynamically unzipped by MAME when you play a game.
    <code class="Nm">ckmame</code> does only support ROM sets stored as zip
    files or unpacked, collected in directories per game.</p>
<p class="Pp"><code class="Nm">ckmame</code> tries to create a &#x201C;split ROM
    set&#x201D; from your current collection. This means that all files needed
    by the parent are kept in the parent's zip file, and only the files needed
    by the clone (or child) that are different from the parent's are kept in the
    child's zip file. For identifying the ROMs ckmame uses the sizes and
    checksums; names are only used for verification, since the MAME team often
    renames ROMs.</p>
<p class="Pp">While <code class="Nm">ckmame</code> uses MAME's ROM database, it
    must be converted into a more efficient format before use. See
    <a class="Xr" href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/mkmamedb.html">mkmamedb(1)</a> for details.</p>
<p class="Pp">By default, <code class="Nm">ckmame</code> will check the games
    named on the command line, or all games if none are given. Shell wildcards
    are allowed. You can use command line options to select which type of errors
    to report.</p>
<section class="Ss">
<h2 class="Ss" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h2>
Supported options:
<dl class="Bl-tag">
  <dt><code class="Fl">-</code><code class="Fl">-autofixdat</code></dt>
  <dd>Like <code class="Fl">-</code><code class="Fl">-fixdat</code>, but
      automatically generates the output file name from the datfile's name and
      version number: &#x201C;<span class="Pa">fix_$SYSTEM
      ($VERSION).dat</span>&#x201D;.</dd>
  <dt><code class="Fl">-</code><code class="Fl">-config</code>
    <var class="Ar">file</var></dt>
  <dd>read configuration from <var class="Ar">file</var>. See the
      <a class="Sx" href="#CONFIG_FILE">CONFIG FILE</a> section for more
      details.</dd>
  <dt><code class="Fl">-</code><code class="Fl">-copy-from-extra</code></dt>
  <dd>Keep used files in extra directories (default).</dd>
  <dt><code class="Fl">-</code><code class="Fl">-fixdat</code>
    <var class="Ar">datfile</var></dt>
  <dd>Create a clrmamepro-style &#x201C;fixdat&#x201D; file, i.e. an XML file
      containing only the files missing in the ROM set compared to the database
      used.</dd>
  <dt><code class="Fl">-</code><code class="Fl">-keep-old-duplicate</code></dt>
  <dd>Keep files in ROM set that are also in old ROM database.</dd>
  <dt><code class="Fl">-</code><code class="Fl">-no-complete-games-only</code></dt>
  <dd>Keep partial games in ROM set (default).</dd>
  <dt><a class="permalink" href="#C"><code class="Fl" id="C">-C</code></a>,
    <code class="Fl">-</code><code class="Fl">-complete-games-only</code></dt>
  <dd>Only create complete games. ROMs for incomplete games are moved to the
      <span class="Pa">needed</span> directory.</dd>
  <dt><a class="permalink" href="#c"><code class="Fl" id="c">-c</code></a>,
    <code class="Fl">-</code><code class="Fl">-report-correct</code></dt>
  <dd>Report status of ROMs that are correct. By default they are not
    mentioned.</dd>
  <dt><a class="permalink" href="#D"><code class="Fl" id="D">-D</code></a>,
    <code class="Fl">-</code><code class="Fl">-db</code>
    <var class="Ar">dbfile</var></dt>
  <dd>Use <var class="Ar">dbfile</var> instead of the default
      <span class="Pa">mame.db</span> as the database.</dd>
  <dt><a class="permalink" href="#e"><code class="Fl" id="e">-e</code></a>,
    <code class="Fl">-</code><code class="Fl">-extra-directory</code>
    <var class="Ar">dir</var></dt>
  <dd>Search for missing files in directory dir (multiple directories can be
      specified by repeating this option).</dd>
  <dt><a class="permalink" href="#F"><code class="Fl" id="F">-F</code></a>,
    <code class="Fl">-</code><code class="Fl">-fix</code></dt>
  <dd>Fix the ROM set. By default, only the status is reported.</dd>
  <dt><a class="permalink" href="#h"><code class="Fl" id="h">-h</code></a>,
    <code class="Fl">-</code><code class="Fl">-help</code></dt>
  <dd>Display a short usage.</dd>
  <dt><a class="permalink" href="#j"><code class="Fl" id="j">-j</code></a>,
    <code class="Fl">-</code><code class="Fl">-move-from-extra</code></dt>
  <dd>Remove used files from extra directories. Opposite of
      <code class="Fl">-</code> <code class="Fl">-copy-from-extra</code>.</dd>
  <dt><code class="Fl">-</code><code class="Fl">-no-report-correct</code></dt>
  <dd>Don't report status of ROMs that are correct (default).</dd>
  <dt><code class="Fl">-</code><code class="Fl">-no-report-detailed</code></dt>
  <dd>Don't report status of every ROM (default).</dd>
  <dt><code class="Fl">-</code><code class="Fl">-no-report-fixable</code></dt>
  <dd>Don't report status of ROMs that can be fixed.</dd>
  <dt><code class="Fl">-</code><code class="Fl">-no-report-missing</code></dt>
  <dd>Don't report status of ROMs that are missing.</dd>
  <dt><code class="Fl">-</code><code class="Fl">-no-report-summary</code></dt>
  <dd>Don't print summary of ROM set status (default).</dd>
  <dt><code class="Fl">-</code><code class="Fl">-report-detailed</code></dt>
  <dd>Report status of every ROM that is checked.</dd>
  <dt><code class="Fl">-</code><code class="Fl">-report-fixable</code></dt>
  <dd>Report status of ROMs that can be fixed (default).</dd>
  <dt><code class="Fl">-</code><code class="Fl">-report-missing</code></dt>
  <dd>Report status of ROMs that are missing (default).</dd>
  <dt><code class="Fl">-</code><code class="Fl">-report-summary</code></dt>
  <dd>Print summary of ROM set status at the end of the output.</dd>
  <dt><code class="Fl">-</code><code class="Fl">-set</code>
    <var class="Ar">name</var></dt>
  <dd>Check ROM set name. This uses the configuration from the corresponding
      section in the Config files. See <a class="Sx" href="#CONFIG_FILES">CONFIG
      FILES</a> for details</dd>
  <dt><a class="permalink" href="#O"><code class="Fl" id="O">-O</code></a>,
    <code class="Fl">-</code><code class="Fl">-old-db</code>
    <var class="Ar">dbfile</var></dt>
  <dd>Assume that the files in the database <var class="Ar">dbfile</var> exist
      in some other location (e.g., on an offline disk or backup medium).</dd>
  <dt><a class="permalink" href="#R"><code class="Fl" id="R">-R</code></a>,
    <code class="Fl">-</code><code class="Fl">-rom-dir</code>
    <var class="Ar">dir</var></dt>
  <dd>Look for the ROM set in the directory <var class="Ar">dir</var> instead of
      the default <span class="Pa">roms</span>.</dd>
  <dt><a class="permalink" href="#T"><code class="Fl" id="T">-T</code></a>,
    <code class="Fl">-</code><code class="Fl">-game-list</code>
    <var class="Ar">file</var></dt>
  <dd>Read the list of games to check from <var class="Ar">file</var>.
      <var class="Ar">file</var> should contain one line per game.</dd>
  <dt><a class="permalink" href="#u"><code class="Fl" id="u">-u</code></a>,
    <code class="Fl">-</code><code class="Fl">-roms-unzipped</code></dt>
  <dd>Instead of looking for ROMs in the ZIP archive
      <span class="Pa">roms/games.zip</span>, look for them in the directory
      <span class="Pa">roms/games/</span> in the file system.</dd>
  <dt><a class="permalink" href="#V"><code class="Fl" id="V">-V</code></a>,
    <code class="Fl">-</code><code class="Fl">-version</code></dt>
  <dd>Display version number.</dd>
  <dt><a class="permalink" href="#v"><code class="Fl" id="v">-v</code></a>,
    <code class="Fl">-</code><code class="Fl">-verbose</code></dt>
  <dd>Print fixes made.</dd>
</dl>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="ENVIRONMENT"><a class="permalink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<dl class="Bl-tag">
  <dt><a class="permalink" href="#MAMEDB"><code class="Ev" id="MAMEDB">MAMEDB</code></a></dt>
  <dd>Location for the database file. Can be overridden with the
      <code class="Fl">-</code><code class="Fl">-dbfile</code> option. Defaults
      to &#x201C;<span class="Pa">mame.db</span>&#x201D;.</dd>
  <dt><a class="permalink" href="#MAMEDB_OLD"><code class="Ev" id="MAMEDB_OLD">MAMEDB_OLD</code></a></dt>
  <dd>Location for the database file of files that exist elsewhere. Can be
      overridden with the
      <code class="Fl">-</code><code class="Fl">-old-db</code> option. Defaults
      to &#x201C;<span class="Pa">old.db</span>&#x201D;.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
By default, the configuration is read from
  <span class="Pa">~/.config/ckmame/ckmamerc</span> and
  <span class="Pa">.ckmamerc</span> if they exist, in this order.
<p class="Pp">The database file to read from defaults to
    <span class="Pa">mame.db</span> and the roms are expected in the
    <span class="Pa">roms</span> directory.</p>
<p class="Pp">Unknown files are moved to the sub-directory
    <span class="Pa">unknown</span>. Files that will be needed by other games in
    the ROM set are moved to the <span class="Pa">needed</span> directory.</p>
<p class="Pp"><code class="Nm">ckmame</code> creates
    <span class="Pa">.ckmame.db</span> files in the rom directory as well as the
    directories given with <code class="Fl">-e</code>. These files are databases
    containing file names, sizes, and their hashes. The database information
    used when the file hasn't changed since the last run (i.e. same size and
    modification time).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
Print a report about the current state of your ROM sets in the
  <span class="Pa">roms</span> subdirectory of the current dir:
<div class="Bd
  Bd-indent"><code class="Li"><code class="Ic">ckmame</code></code></div>
<p class="Pp">Fix all sets and only report unfixable errors, omitting those ROMs
    where no good dump exists:</p>
<div class="Bd Bd-indent"><code class="Li"><code class="Ic">ckmame
  -Fd</code></code></div>
<p class="Pp">Fix all sets using the files found in
    <var class="Ar">updatedir</var>, removing files from there that are copied
    to the ROM set:</p>
<div class="Bd Bd-indent"><code class="Li"><code class="Ic">ckmame -Fj -e
  updatedir</code></code></div>
<section class="Ss">
<h2 class="Ss" id="CONFIG_FILE"><a class="permalink" href="#CONFIG_FILE">CONFIG
  FILE</a></h2>
By default, <code class="Nm">ckmame</code> reads the config files
  <span class="Pa">~/.config/ckmame/ckmamerc</span> and
  <span class="Pa">.ckmamerc</span> and the one given by the
  <code class="Fl">-</code> <code class="Fl">-config</code> option, in this
  order. The files are in TOML format. The &#x201C;[global]&#x201D; section
  contains defaults for all sets, while the &#x201C;[&quot;SET
  NAME&quot;]&#x201D; option adds overrides for the
<div class="Bd Bd-indent"><code class="Li">&#x201C;SET NAME&#x201D;</code></div>
set (as provided by the <code class="Fl">-</code><code class="Fl">-set</code>
  option). The options are set using the long name options from above. Most
  options are boolean options, so the &quot;no-&quot; options are set by setting
  the corresponding option to false, i.e.
  <code class="Fl">-</code><code class="Fl">-no-report-missing</code> is written
  as
<div class="Bd Bd-indent"><code class="Li">report-missing = false</code></div>
in the config file.
  <code class="Fl">-</code><code class="Fl">-copy-from-extra</code> is set by
<div class="Bd Bd-indent"><code class="Li">move-from-extra = false</code></div>
The following options can not be set from the config file:
<ul class="Bl-item Bd-indent Bl-compact">
  <li><code class="Fl">-</code><code class="Fl">-config</code></li>
  <li><code class="Fl">-</code><code class="Fl">-fix</code></li>
  <li><code class="Fl">-</code><code class="Fl">-help</code></li>
  <li><code class="Fl">-</code><code class="Fl">-version</code></li>
</ul>
<p class="Pp">The <code class="Cm">extra-directory</code> config parameter
    overrides the search directories, and there is
    <code class="Cm">extra-directory-append</code> if you want add to the search
    path instead.</p>
<p class="Pp">For example:</p>
<div class="Bd Pp">
<pre>
[global]
verbose = true

[&quot;Big Set&quot;]
verbose = false
rom-dir = &quot;Big Set ROMs&quot;
dbfile = &quot;Big Set.db&quot;

[&quot;Unzipped Set&quot;]
roms-unzipped = true
rom-dir = &quot;Unzipped Set ROMs&quot;
dbfile = &quot;Unzipped Set.db&quot;
</pre>
</div>
<p class="Pp">This configuration would by default report verbosely, but override
    this for the &quot;Big Set&quot; set. It would also set the rom directories
    and database files for both the &quot;Big Set&quot; and the &quot;Unzipped
    Set&quot; and not use ZIP archives for the latter.</p>
<p class="Pp">Example run:</p>
<div class="Bd Bd-indent"><code class="Li">ckmame --set Big Set</code></div>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="DIAGNOSTICS"><a class="permalink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
Most messages should be straightforward. Two need special explanations:
<p class="Pp">If a file is marked as &#x201C;broken&#x201D;, it means that the
    computed checksum is not the same as the checksum stored in the zip archive,
    usually because there has been a decompression error.</p>
<p class="Pp">If a ROM or disk is marked with &#x201C;checksum mismatch&#x201D;,
    the primary checksum matches, but one of the other checksums does not. The
    primary checksum for ROMs is CRC32, for disks MD5.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr" href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/dumpgame.html">dumpgame(1)</a>,
  <a class="Xr" href="http://pubs.opengroup.org/onlinepubs/9699919799/functions/mkmamedb.html">mkmamedb(1)</a>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<code class="Nm">ckmame</code> was written by <span class="An">Dieter
  Baron</span> &#x27E8;dillo@nih.at&#x27E9; and <span class="An">Thomas
  Klausner</span> &#x27E8;tk@giga.or.at&#x27E9;.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">January 14, 2022</td>
    <td class="foot-os">NiH</td>
  </tr>
</table>
</body>
</html>
