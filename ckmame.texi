\input texinfo	@c -*-texinfo-*-
@c %**start of header
@setfilename ckmame.info
@settitle ckmame
@setchapternewpage odd
@c %**end of header
@c @synindex tp vr

@include version.texi

@ifinfo
@format
START-INFO-DIR-ENTRY
* ckmame: (ckmame).             Check and fix MAME rom sets (zip files).
END-INFO-DIR-ENTRY
@end format
@end ifinfo

@ifinfo
This file documents ckmame @value{VERSION}

Copyright 1999 Dieter Baron, Thomas Klausner

Permission is granted to make and distribute verbatim copies of
this manual provided the copyright notice and this permission notice
are preserved on all copies.

@ignore
Permission is granted to process this file through TeX and print the
results, provided the printed document carries copying permission
notice identical to this one except for the removal of this paragraph


@end ignore
Permission is granted to copy and distribute modified versions of this
manual under the conditions for verbatim copying, provided that the
entire resulting derived work is distributed under the terms of a
permission notice identical to this one.

Permission is granted to copy and distribute translations of this manual
into another language, under the above conditions for modified versions,
except that this permission notice may be stated in a translation
approved by the Free Software Foundation.
@end ifinfo


@titlepage
@title @sc{ckmame} -- Check and Fix MAME ROM Sets
@subtitle For version @value{VERSION}, @value{UPDATED}
@author Dieter Baron
@author Thomas Klausner
@c copyright page
@page
@vskip 0pt plus 1filll
Copyright @copyright{} 1999 Dieter Baron, Thomas Klausner
@sp 2
This is a draft edition of the @sc{ckmame} documentation,@*
and is consistent with @sc{ckmame} @value{VERSION}.@*
@sp 2
@ignore
Published by the Free Software Foundation @*
59 Template Place - Suite 330, @*
Boston, MA 02111-1307 USA @*

@end ignore
Permission is granted to make and distribute verbatim copies of
this manual provided the copyright notice and this permission notice
are preserved on all copies.

Permission is granted to copy and distribute modified versions of this
manual under the conditions for verbatim copying, provided that the entire
resulting derived work is distributed under the terms of a permission
notice identical to this one.

Permission is granted to copy and distribute translations of this manual
into another language, under the above conditions for modified versions,
except that this permission notice may be stated in a translation
approved by the Free Software Foundation.
@end titlepage

@ifinfo
@c ****************************************************************
@node Top, , ,(dir)
@top ckmame

This file documents @sc{ckmame}, a command line rom checker for MAME,
the Multiple Arcade Machine Emulator.  This edition documents version
@value{VERSION}.

@menu
* Introduction::        An introduction to @sc{ckmame}
* Preparation::         What you need to do before the first run
* Invoking ckmame::     How to start @sc{ckmame}
* Invoking dumpgame::   How to view the data base
* Index::               Listing of all keywords
@end menu
@end ifinfo


@c ********************************************************************
@node Introduction
@chapter Introduction
@cindex Introduction

  ckmame is a program to check rom sets for MAME, the Multiple Arcade
Machine Emulator (http://mame.retrogames.com).  It tells you which rom
files are missing or have a wrong CRC, and can delete unknown and unused
files from the romsets (zipped only).

  MAME is an emulator for all kinds of historic and not so historic
arcade machines (video games, ranging from the 1970s to today).  Since
MAME is emulating the games, it uses the original roms from the arcade
machines.  MAME's internal database contains extensive information on
the roms, including the sizes and CRCs (checksums) of the used roms.
Since some arcade games are variants of others and share some of the
same roms, there are also some internal dependencies of these so called
clones.  For space reasons the roms can be archived in zip files, and
are dynamically unzipped by MAME itself when you play a game.  ckmame
does not support rom sets not stored as zip files.

  ckmame tries to create a ``split romset'' from your current
collection.  This means that all files needed by the parent are kept in
the parent's zip file, and only the files needed by the clone (or child)
that are different from the parent's are kept in the child's zip.  For
identifying the roms ckmame uses the sizes and CRCs; names are only used
for verification, since the MAME team likes to change roms' names from
version to version.

@c ********************************************************************
@node Preparation
@chapter Preparation
@cindex Preparation

  ckmame uses MAME's rom database, but it must be converted into a more
efficient format before the first use.

  To get MAME's rom database, start your MAME executable with the
command line option '-listinfo', and redirect the output into a file,
here db.txt, since it gets rather big (about 4 MB):
@example
mame -listinfo > db.txt
@end example
or
@example
xmame -listinfo > db.txt
@end example

  Then use mkmamedb to convert db.txt into the internal database
format. The default input file is db.txt, and the output file is mame.db
or mame.gdb or mame.gdbm, depending on your version of the program and
which database you're using.  The most simple call of mkmamedb therefore
looks like this:
@example
mkmamedb
@end example

  Of course you can tell mkmamedb to use a different input or output
file:
@example
mkmamedb -o mydb.db db0.36b6.txt
@end example

  --dillo--database location, env var
  Set the environment variables `MAMEDB' to point to the database file
mkmamedb just created, and `ROMPATH' to the directory above the one
where your roms reside (`/roms' will be added automatically to each
entry, just like MAME does).  If you don't set them, ckmame will use
the current directory as defaults for both.


@c ********************************************************************
@node Invoking ckmame
@chapter Invoking ckmame
@cindex Invoking ckmame

   By default, ckmame is very simple to invoke.  The basic syntax is:

@example
ckmame @var{[options]} @var{[game]} @dots{}
@end example

  ckmame will check the games named, or all games if none are given.
Shell wildcards are allowed in @var{game}.

  However, you may wish to specify the location of the data base or rom
sets, change the diagnostics output, or fix romsets:

@menu
* Locations::          Specifying data base and rom set locations.
* Diagnostics::        Changing which diagostics are printed.
* Fixing::             Fixing rom sets.
@end menu


@c ====================================================================
@node Locations
@section locations
@cindex locations

  ckmame needs to find its data base (see @xref{Preparation}).  You can
specify 
