2005-06-12  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* config.guess, config.guess, ltmain.sh: Update from
	libtool-1.5.18.

	* dumpgame.man, dumpgame.mdoc: Add man page.

2004-08-23  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* dumpgame.c: Add -c, -t to find a game by looking for a rom
	checksum.

	* depcomp, install-sh, mkinstalldirs: update from automake-1.9.1.

	* ltmain.sh: update from libtool-1.5.6.

2004-08-04  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* parse-xml.c (parse_xml): add MESS support.

2004-05-16  Dieter Baron  <dillo@danbala.tuwien.ac.at>

	* match.c (warn_disk): report disks without any hashes as no good
	dump.
	(diagnostics): treat disks without any hashes as no good dump.

2004-04-28  Dieter Baron  <dillo@danbala.tuwien.ac.at>

	* chd-supp.c (read_infos_from_chd): implement integrity checking.
	* chd.c: new file.
	
2004-04-27  Dieter Baron  <dillo@danbala.tuwien.ac.at>

	* match.c (match): only accept matches that are ROM_NAMERR or
	better.

2004-04-22  Dieter Baron  <dillo@danbala.tuwien.ac.at>

	* some const poisoning.
	
	* mkmamedb.c (main): let no argument mean read from stdin.
	* dbread.c (dbread): if fname is NULL, read from stdin.

2004-04-21  Dieter Baron  <dillo@danbala.tuwien.ac.at>

	* r_prog.c (r_prog): make compile.

	* dumpgame.c: allow dumping of /prog and lists.  make local
	functions static, const poisoning.

	* dbread.c (dbread): fix writing of /prog.

	* superfluous.c (handle_extra_files): strip .chd extension from
	file names.

	* util.c (findfile): search for disk images with extension .chd
	and without extension.

2004-04-16  Dieter Baron  <dillo@danbala.tuwien.ac.at>

	* zip-supp.c (readinfosfromzip): adapt to zip_open's changed error
	code for non-existing files.

2004-04-14  Dieter Baron  <dillo@danbala.tuwien.ac.at>

	* fix.c (fix_add_garbage, fix_file), zip-supp.c (findcrc,
	readinfosfromzip): adapt to libzip API changes.
	
2004-02-26  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* Makefile.am (ckmame_SOURCES): fix typo in filename.
	* superfluous.c: rename from superflouos.c.

	* dbread.c: make some more functions static.

	* Makefile.am: include previous superflouos in ckmame itself.
	* ckmame.c: add -X (ignore extra files in roms/samples dirs).
	(main): handle -X; call handle_extra_files.
	* funcs.h (handle_extra_files): add prototype. Remove variable
	names from prototypes.
	* superflouos.c (handle_extra_files): check for extra files in
	roms or samples respectively dirs. Remove standalone code.
	* ckmame.mdoc: document -X.
	* ckmame.man: regen.

	* dbl.h (DDB_FORMAT_VERSION): bump db version to 3 for new lists.
	* dbread.c (dbread): write lists of samples and extra files (hard
	disk images only, for now) to db.
	(add_extra_list, add_extra_list) : new functions.

	* util.h: add rompath var, and remove variable names from
	prototypes.

	* util.c (findfile): don't init rompath twice.

	* match.c: include string.h for memcmp prototype.

	* configure.ac: AC_PROG_RANLIB unnecessary when using libtool.

	* config.guess, config.sub, ltmain.sh: update from libtool-1.5.2.

2004-02-05  Dieter Baron  <dillo@danbala.tuwien.ac.at>

	* util.c (findfile): rename from findzip, allow to find disk
	images; adapt callers.

	* types.h (struct rom, struct disk): add field crctypes.
	* dbl.h: bump database format version
	* w_game.c (w__rom, w__disk): adapt.
	* r_game.c (r__rom, r__disk): adapt.
	* chd-supp.c (readinfosfromchd): fill in crctypes.
	* dbread.c (dbread): fill in crctypes.
	* dumpgame.c (dump_game): use crctypes.
	* util.h: garbage collect IS_NUL.

	* match.c (warn_disk, check_disks, disk_match_free): new
	functions.
	* match.c (diagnostics): analyze disks.
	* treetrav.c (tree_child_traverse): check disks.
	
2004-01-29  Dieter Baron  <dillo@danbala.tuwien.ac.at>

	* chd-supp.c (readinfosfromchd): new function.

2004-01-28  Dieter Baron  <dillo@danbala.tuwien.ac.at>

	* dbl.c (ddb_error): report version mismatch errors.
	* db-db.c, db-gdbm.c (ddb_error_l): renamed from ddb_error.
	* error.c (myerror): new flag ERRDB for database errors.
	* ckmame.c (main): use ERRDB.
	* mkmamedb.c (main): use ERRDB.

	* db-gdbm.c (ddb_open): don't check version if open failed.
	* db-db.c (ddb_open): don't check version if open failed.

2004-01-28  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* r_game.c (r_game): read disk image info from db.
	(r__disk): new function.
	* w_game.c (w_game): write disk image info to db.
	(w__disk): new function.

	* dumpgame.c (dump_game): print disk image lines.
	* dbread.c (dbread): parse disk image lines.

2004-01-27  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* types.h: add struct disk to struct game, sha1 to struct rom.
	* dbread.c (dbread): parse SHA1 for roms.
	* dumpgame.c (dump_game): print SHA1 for roms.
	* util.c (bin2hex, hex2bin): new functions.
	* dbl.c (ddb_check_version): new function.
	* dbl.h: define database format version.
	* db-db.c, db-gdbm.c (ddb_open): call ddb_check_version.
	* mkmamedb.c (main): initialize db (write format version).
	* r_game.c (r__rom): read SHA1.
	* w_game.c (w__rom): write SHA1.
	* r_util.c (r__mem): new function.
	* w_util.c (w__mem, w_version): new functions.
	
2003-12-30  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* fix.c (fix_game): test correct struct stat field.
	(fix_game): add some '\n' in error messages.

2003-12-28  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* zip-supp.c (readinfosfromzip): bugfix for previous.

	* ckmame.c: sort options alphabetically.

	* config.guess, config.sub, depcomp, install-sh, missing,
	mkinstalldirs: update from automake-1.8.

	* zip-supp.c: make compile with current external libzip.
	* fix.c: make compile with current external libzip.

	* malloc.c (xstrdup): constify.
	* xmalloc.h (xstrdup): constify.

2003-09-13  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* w_game.c (w__rom): write flags to db.

	* types.h: add flags variable to rom structure; define values as
	enum.

	* romutil.c (romcmp): honor flags.

	* r_game.c (r__rom): read in flags from db.

	* match.c (diagnostics): honor flags.

	* dumpgame.c: add strings for flags.
	(dump_game): widen size column and add flags column.

	* dbread.c (dbread): change token parser to be more flexible wrt
	to order of the tokens; recognize flags nodump and baddump.

2003-03-14  Dieter Baron  <dillo@danbala.tuwien.ac.at>

	* ckmame.c (main), dumpgame.c (main): don't add extension when
	database file is explicitly given.

2003-02-27  Dieter Baron  <dillo@danbala.tuwien.ac.at>

	* romutil.c (rom_add_name): use xrealloc.

2003-02-23  Dieter Baron  <dillo@danbala.tuwien.ac.at>

	* error.c (myerror): change error type to flags, adapt callers.
	(seterrinfo): set to default (<unknown>) if name is NULL.
	
	* dbl.c (ddb_lookup, ddb_insert): make key argument a string;
	adapt callers.

	* dbread.c, r_list.c, zip-supp.c: add include files to get
	prototypes of functions defined here.
	* mkmamedb.h: include dbl.h for definition of DB.
	
	* db-gdbm.c (ddb_open), db-db.c (ddb_open): change to take flag
	argument (and adapt callers), use ddb_name to add file name
	extension.
	* db-db.h, db-gdbm.h: rename DDB_EXT to DDB_FILEEXT.
	* db-gdbm.h: move platform dependent extension definition here.

	* r_game.c: include dbh.h to get r_game() prototype.

	* r_game.c (r__rom), w_game.c (w__rom): use variable of correct
	type to minimize casts.

	* ckmame.c, dumpgame.c, mkmamedb.c, superflouos.c: belatedly bump
	copyright date.
	
2003-01-30  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* configure.ac: bump to 0.5.

	* r_util.c (r__ulong): mask off possible higher bits in ulong
	case.

	* ckmame.mdoc: add man page.
	* ckmame.man: generated from ckmame.man.

	* db-db.h: prefer db_185.h to db.h, if found.
	* configure.ac: test for db_185.h.

	* db-db.c,  db-gdbm.c, dbl.c, r_util.c, w_util.c: include <string.h>.
	* libzip/tests/buffadd.c: include <string.h>.
	* libzip/zip_replace_data.c: include <string.h>.

2002-11-15  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* fix.c	(fix_game): Use defined value instead of magic number.

	* COPYING, INSTALL, config.guess, config.sub, configure.in, 
	install-sh, ltcf-c.sh, ltconfig, ltmain.sh, missing,
	mkinstalldirs: Update to autoconf-2.56/automake-1.7.1.

	* depcomp: new file for above.

2001-10-28  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* superflouos.c (main), dumpgame.c (main), ckmame.c (main),
	mkmamedb.c (main): don't initialize optind

2001-10-28  Dieter Baron  <dillo@danbala.tuwien.ac.at>

	* dbread.c (dbread): handle names containing white space.
	(gettok): new function.
	
	* dbread.c (dbread): stricter check for crc token.

2001-10-27  Dieter Baron  <dillo@danbala.tuwien.ac.at>

	* libzip/zip_replace_zip.c (read_part): fix typo: pass correct
	length to zip_read()

2001-10-27  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* dbread.c (dbread): add support for MESS (recognize "machine")

	* mkmamedb.c (main): sync dbname resolution with ckmame and
	dumpgame

2001-10-20  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* dbl.c (ddb_name): only free() stuff that was allocated
	* mkmamedb.c (main): only free() stuff that was allocated

	* dumpgame.c (main): don't shadow global variable

	* util.h: add prototype for init_rompath()

	* db-gdbm.c (ddb_open): #if -> #ifdef; free() s if allocated

	* libzip/zip_open.c (_zip_readcdir): Work around some broken zip
	files.

2001-08-20  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* dbl.c (ddb_lookup): only free data we allocated

2001-05-16  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* configure.in, ltconfig, ltmain.sh: update libtool, and repair
	libz test for NetBSD-current (no OF macro)
	* ltcf-c.sh: new file for above

2000-11-05  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* libzip/Makefile.am: install public header file

2000-11-04  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* Makefile.am, configure.in, libzip/Makefile.am,
	libzip/tests/Makefile.am: make libzip shared by using libtool
	* config.guess, config.sub, libtool.m4, ltconfig, ltmain.sh: new
	files for above

	* libzip/Makefile.am, zip.h: add zip_get_name
	* libzip/zip_get_name.c: new file

	* libzip/tests/ziptest.c (main): add some '\n'

1999-11-23  Dieter Baron  <dillo@danbala.tuwien.ac.at>

	* util.c: (rompath, init_rompath) declared non-static for access
	in superflouos.c
	* superflouos.c: new program

1999-10-06  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* TODO, README.DOS, NEWS: updated

1999-10-05  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* treetrav.c (zfile_new): zfile_new fixed, now returns useful zip
	names, instead of just the name of the game

1999-10-05  Dieter Baron  <dillo@danbala.tuwien.ac.at>

	* treetrav.c (tree_child_traverse): close zip files created in
	fix_do (all_z[0]).

1999-10-05  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* libzip/zip_close.c (zip_close): make zip_close work under DOS,
	free zip structure for temp file

1999-09-27  Thomas Klausner  <wiz@danbala.tuwien.ac.at>

	* romutil.c (romcmp): removed comment for already fixed behaviour

	* w_game.c, w_util.c (w__rom): moved function from w_util.c to
	w_game.c

	* r_game.c, r_util.c (r__rom): moved function from r_util.c to
	r_game.c 

ckmame-0.4: first released version
